<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/internshipsPublic.css">
    <title>s'Cool Family</title>
</head>
<body>
<%- include('homePublic') %>
<section>
    <div id="internship">
        <% if (data.length == 0){ %>
        <p> Il n'y a aucun stage prévu.</p>
        <% } else { %>
        <% data.forEach(function(elem) { %>
        <div class="card" style="width: 18rem;">
            <div class="card-body">
                <h5 class="card-title"><%= elem.name %></h5>
                <% if (elem.image) { %>
                <img src="data:image/png;base64,<%= elem.image.toString('base64') %>" class="card-img-top" alt="Illustration du stage">
                <% } else { %>
                <img class="card-img-top" src="/no_image.png" alt="Pas d'image">
                <% } %>
                <ul class="list-group list-group-flush">
                    <li class="list-group-item"><%= elem.desc %>
                        <% if (elem.desc) { %>
                        <% const maxLength = 100; %>
                        <%= elem.desc.length > maxLength ? elem.desc.slice(0, maxLength) + "..." : elem.desc %>
                        <% } %>
                    </li>
                    <li class="list-group-item"><strong>À partir de</strong> <%= elem.fromAge %> ans</li>
                    <li class="list-group-item"><%= elem.numberAvailable %> places disponibles </li>
                    <li class="list-group-item"><strong>Où</strong> ? <%= elem.place %></li>
                    <li class="list-group-item"><strong>Quand ? </strong> Du <%= new Date(elem.startDate).toLocaleDateString('fr-FR') %>
                        au <%= new Date(elem.endDate).toLocaleDateString('fr-FR') %>
                    </li>
                    <li class="list-group-item"><strong>Horaire:</strong> De <%= elem.startHour %> au <%= elem.endHour %> </li>
                    <li class="list-group-item"><%= elem.price %>€ / inscription</li>
                    <a href="/public/signIn?internshipId=<%= elem.id %>" class="btn btn-warning">S'inscrire</a>
                </ul>
            </div>
        </div>
        <% }); %>
        <% } %>
    </div>
</section>
</body>
</html>